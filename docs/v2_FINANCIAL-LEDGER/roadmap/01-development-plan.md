# 단계별 개발 계획

> 📌 **프로젝트 상태:** 2025-02-23 기준 **설계 및 기획 단계 완료**.
> - 아키텍처, 기술 스택, 모듈 시스템, UI/UX 등 모든 핵심 설계가 문서화되었습니다.
> - Monorepo 구조 및 초기 설정(Phase 1.1)이 완료되었습니다.
> - 실제 구현은 2026-2027년 목표로 진행될 예정입니다.

## 개요

Fieldstack은 점진적으로 개발되며, 각 단계는 독립적으로 완성도가 높아야 합니다.

## Phase 1: Core 기반 구축 (3개월)

### 목표
안정적인 Core 레이어와 기본 인프라 구축

### 주요 작업

#### 1.1 프로젝트 세팅
**예상 기간: 2주**

- [x] Monorepo 구조 설정 (pnpm workspace)
- [x] TypeScript 설정
- [x] ESLint/Prettier 설정
- [x] Git 저장소 생성
- [x] CI/CD 파이프라인 (GitHub Actions)

**결과물:**
```
Fieldstack/
├── pnpm-workspace.yaml
├── package.json
├── tsconfig.json
├── .eslintrc.js
├── .prettierrc
└── .github/
    └── workflows/
        ├── ci.yml
        └── deploy.yml
```

#### 1.2 Core Layer 개발
**예상 기간: 6주**

**Auth (인증):**
- [x] 이메일 + 비밀번호 로그인 (기본) (설계 완료)
- [x] TOTP 2FA (Google Authenticator 등) (설계 완료)
- [ ] Passkey(WebAuthn) 로그인 (선택) (설계 완료)
- [ ] Google OAuth 2.0 통합 (선택) (설계 완료)
- [x] Whitelist 시스템 (설계 완료)
- [x] JWT 세션 관리 (설계 완료)
- [x] 관리자 PIN 시스템 (설계 완료)
- [x] 비밀번호 분실 복구 (SMTP self-service + Admin-assisted) (설계 완료)
- [x] Mode 1 Local CLI reset 명령 (설계 완료)

**Database (DB 추상화):**
- [x] Provider 인터페이스 정의 (설계 완료)
- [x] PostgreSQL Provider (설계 완료)
- [x] SQLite Provider (설계 완료)
- [x] Supabase Provider (설계 완료)
- [x] MongoDB Provider (선택) (설계 완료)
- [x] 마이그레이션 시스템 (설계 완료)

**Types (공통 타입):**
- [x] API 타입 정의 (설계 완료)
- [x] User 타입 (설계 완료)
- [x] Module 타입 (설계 완료)
- [x] Integration 타입 (설계 완료)

**Utils (유틸리티):**
- [x] 날짜 처리 함수 (설계 완료)
- [x] 포맷팅 함수 (설계 완료)
- [x] 검증 함수 (설계 완료)
- [x] 암호화 함수 (설계 완료)

**UI Components (Core UI):**
- [x] Button, Input, Select (설계 완료)
- [x] Modal, Card, Table (설계 완료)
- [x] Form, DatePicker (설계 완료)
- [x] Layout 컴포넌트 (설계 완료)
- [x] Hooks (useForm, useModal, useTable) (설계 완료)

#### 1.3 Module Loader
**예상 기간: 2주**

- [x] Backend 모듈 자동 스캔 (설계 완료)
- [x] Frontend 모듈 자동 로드 (설계 완료)
- [x] module.json 파싱 (설계 완료)
- [x] 라우트 자동 등록 (설계 완료)
- [x] 의존성 체크 (설계 완료)

#### 1.4 테스트 & 문서
**예상 기간: 2주**

- [x] 단위 테스트 (Vitest)
- [x] 통합 테스트
- [x] API 문서 (OpenAPI) (설계 완료)
- [x] 개발자 가이드
- [x] README 작성

### 마일스톤 1 완료 기준
- ✅ Core 레이어 완성
- ✅ Module Loader 작동
- ✅ 테스트 커버리지 > 70%
- ✅ 문서 완성

---

## Phase 1.5: UI/UX (Core Control Plane)

### 목표
모듈 화면 개발(Phase 2) 전에, Core 기반 컨트롤 UI/UX를 먼저 완성하여
"설치 -> 로그인 -> 홈 -> 설정" 기본 흐름을 단독으로 동작 가능하게 만든다.

이 Phase는 작업 순서에 영향을 주지 않지만 Phase 2 작업 이전에 작업을 해두는 것을 권장

### 범위 명시
- [ ] Phase 1.5는 Core Control Plane에 한정
- [ ] Ledger/Subscription 등 모듈 화면 구현은 제외 (Phase 2에서 진행)
- [ ] 모듈이 0개여도 앱이 제품처럼 동작하는 기본 UX 확보

### 주요 작업

진행 업데이트 (2026-02-27):
- Web 진입점을 React + TypeScript + Vite(`main.tsx`) 기준으로 전환 완료
- 개발 실행 모드에 `dev:bypass`를 추가해 설치 미구현 상태에서도 Core UI/UX 병행 개발 가능
- bypass 정책을 "설치만 스킵, 인증은 로그인부터"로 확정 (로그인 이후 화면은 mock 상태로 점진 구현)

#### 1.5.1 Control UI Components (버튼/선택/토글 등 기본 Control)
**예상 기간: 1주**

> 원칙: "모든 Control 선제 구현"이 아니라, Core 흐름에 필요한 Control MVP를 먼저 고정하고,
> 추가 Control은 Phase 2 모듈 개발/커뮤니티 요청 기반으로 점진 확장한다.

Control 전체 목록과 상태 관리는 별도 문서에서 관리:
- `docs/v2_FINANCIAL-LEDGER/ui/03-control-backlog.md` (P0 -> P0.5 -> P1)

진행 업데이트 (2026-02-26):
- P0, P0.5 Control 타입 계약 정의 및 export 반영 완료
- 상세 구현 상태는 `ui/03-control-backlog.md`를 기준으로 추적

- [x] Button 규격 확정 (Primary/Secondary/Danger/Ghost, size, loading, disabled)
- [x] Toggle/Switch 규격 확정 (on/off 상태, 라벨 결합, 키보드 조작)
- [x] ComboBox/Select 규격 확정 (단일/다중 선택, 검색, 빈 상태)
- [x] Checkbox/Radio 규격 확정 (단일/그룹 선택, indeterminate 포함)
- [x] Input 계열 공통 규칙 확정 (text/email/password/number/search/tel/url, validation/error/help text)
- [ ] Control 접근성 기준 체크 (focus ring, 명도 대비, aria role/label, tab 순서)
- [x] Control 우선순위 분류 (P0: Core 필수 / P0.5: 반복 사용 / P1/P2: 요청 기반)
- [x] 신규 Control 추가 정책 확정 (요청 -> RFC/이슈 -> 디자인/접근성 검토 -> 릴리스)

#### 1.5.2 설치 마법사 (초기 설정)
**예상 기간: 4일**

- [x] 개발용 bypass 실행 모드 제공 (`dev:bypass`, `dev:web:bypass`, `dev:api:bypass`)
- [ ] Welcome 화면
- [ ] Configuration 화면 (관리자 계정, DB, 선택 옵션)
- [ ] Progress 화면 (단계/로그/오류 상태)
- [ ] Complete 화면 (로그인 진입)
- [ ] 첫 실행 감지 시 /install 강제 라우팅 정책 반영
- [ ] Configuration 단계 유효성 검증 UX 정의 (필수값, 형식 오류, 연결 테스트 결과)
- [ ] Progress 단계 실패 처리 UX 정의 (재시도/이전 단계 복귀/에러 요약)
- [ ] 설치 중 브라우저 새로고침/재접속 복구 정책 정의 (진행 상태 재동기화)
- [ ] Complete 이후 첫 진입 안내 UX 정의 (로그인 후 바로 할 일, 설정 이동)

#### 1.5.3 로그인 (Auth & Access)
**예상 기간: 3일**

- [x] 이메일/비밀번호 로그인 화면 구현 (React shell/mock)
- [ ] 2FA OTP 입력 화면 구현 (활성 계정 대상)
- [ ] 로그인 실패/잠금/세션 만료 UX 정의
- [x] 로그인 성공 후 Home 리다이렉트 규칙 확정 (mock)
- [ ] 비밀번호 복구 UI 구현 (SMTP self-service / 관리자 토큰 복구 안내)
- [ ] OAuth/Passkey 로그인 진입 UI 정책 정의 (활성화된 경우에만 노출)
- [ ] 인증 실패 메시지 규칙 통일 (계정 존재 여부 비노출, 재시도 안내)

#### 1.5.4 Main Home
**예상 기간: 3일**

- [x] Home 화면 정보 구조 확정 (요약 영역, 빠른 액션, 최근 활동) - shell
- [ ] 모듈 0개 상태 Empty UX 구현 (안내 + 다음 행동 CTA)
- [ ] 관리자/일반 사용자 홈 표시 정책 분리
- [x] 글로벌 네비게이션 진입점 확정 (설정, 모듈 관리, 로그아웃) - shell
- [ ] 글로벌 네비게이션 상세 규격 확정 (메뉴 순서, 아이콘, 모바일 Drawer, 키보드 탐색)
- [x] Home 공통 상태 정의 (Loading, Empty, Error, Unauthorized) - mock 상태 전환 기준 반영
- [ ] 첫 로그인 사용자용 온보딩 진입 UX 정의 (튜토리얼/다음 행동 안내)

#### 1.5.5 관리자 대시보드 / 일반 설정
**예상 기간: 4일**

- [x] 일반 설정 화면 뼈대 구현 (프로필/언어/테마) - shell
- [x] 관리자 전용 영역 라우트 분리 - shell
- [ ] 관리자 PIN Step-up 모달 흐름 구현
- [x] Protected Route 정책 구현 (권한 부족 시 리다이렉트) - shell
- [ ] 관리자 PIN 관리 UI 구현 (최초 설정/변경/오류 처리)
- [ ] 관리자 세션 만료 UX 구현 (30분 만료 시 재인증 모달)
- [ ] 일반 설정 저장 UX 보강 (저장 성공/실패, 미저장 변경 경고)
- [ ] 관리자 활동/감사 로그 화면 진입점 정의 (PIN 실패/주요 설정 변경 확인)

#### 1.5.6 UX 품질 기준
**예상 기간: 2일**

- [ ] 데스크톱/모바일 반응형 기준 확인
- [ ] 에러/빈 상태/권한 거부 상태 일관성 점검
- [ ] 핵심 플로우 QA 체크리스트 작성
- [ ] "설치 -> 로그인 -> 홈 -> 설정" E2E 시나리오 정의
- [ ] 접근성 QA 체크리스트 작성 (focus order, aria label/role, 대비, 키보드 전용 조작)
- [ ] 텍스트/피드백 톤 가이드 통일 (성공/실패/경고 문구 일관성)
- [ ] E2E 확장 시나리오 정의 (설치 실패 복구, 비밀번호 복구, 관리자 PIN 만료 재인증)

### 마일스톤 1.5 완료 기준
- ✅ 모듈 없이도 Core UI Shell이 정상 동작
- ✅ 로그인/권한/관리자 PIN 흐름이 일관되게 작동
- ✅ 설치 마법사 4단계(Welcome/Config/Progress/Complete) 동작
- ✅ 일반 설정 진입 및 저장 플로우 검증 완료
- ✅ Phase 2 모듈 UI를 붙일 수 있는 라우팅/레이아웃 기반 확보

### Phase 2 진입 게이트 (권장)
- [x] Control 패키지 MVP 완료 (Button/Input/Select/Toggle/Checkbox/Radio/Modal/Form + P0.5 계약)
- [ ] Auth/Install/Home/Settings/Admin 흐름에서 공통 Control 재사용 검증
- [ ] 접근성/반응형/상태 처리(Loading/Empty/Error/Unauthorized) 기준 통과
- [ ] 핵심 E2E 통과 (설치 -> 로그인 -> 홈 -> 설정/관리자)
- [ ] UI 계약 동결 (Phase 2에서는 신규 Control 추가보다 모듈 기능 구현 우선)
- [ ] 신규 Control은 예외적으로 수요 기반 추가 (모듈 요구사항/커뮤니티 제안 시 배치 처리)

---

## Phase 2: 기본 모듈 개발 (2개월)

### 목표
핵심 기능 모듈 2개 완성 (가계부, 구독 관리)

> 선행 조건(권장): Phase 1.5의 Control/UI/UX 진입 게이트를 통과한 뒤 착수

### 주요 작업

#### 2.1 Ledger Module (가계부)
**예상 기간: 4주**

**Backend:**
- [ ] DB 스키마 설계 (설계 완료)
- [ ] API 엔드포인트 (설계 완료)
  - [ ] CRUD (생성, 조회, 수정, 삭제)
  - [ ] 통계 API
  - [ ] 검색/필터
- [ ] 비즈니스 로직
- [ ] 검증 로직
- [ ] 테스트

**Frontend:**
- [ ] 목록 페이지
- [ ] 상세 페이지
- [ ] 생성/수정 폼
- [ ] 통계 대시보드
- [ ] 차트 시각화 (recharts)
- [ ] 테스트

**기능:**
- [ ] 수입/지출 기록
- [ ] 카테고리 관리
- [ ] 결제 수단 관리
- [ ] 월별/연도별 통계
- [ ] CSV 내보내기
- [ ] 영수증 첨부 (선택)

#### 2.2 Subscription Module (구독 관리)
**예상 기간: 4주**

**Backend:**
- [ ] DB 스키마 설계 (설계 완료)
- [ ] API 엔드포인트 (설계 완료)
- [ ] Google Calendar 연동 (설계 완료)
- [ ] 알림 시스템 (Scheduler) (설계 완료)
- [ ] 테스트

**Frontend:**
- [ ] 구독 목록
- [ ] 구독 추가/수정
- [ ] 대시보드
- [ ] 결제일 캘린더 뷰
- [ ] 테스트

**기능:**
- [ ] 구독 서비스 등록
- [ ] 결제일 추적
- [ ] Google Calendar 자동 등록
- [ ] 결제일 알림 (D-7, D-3, D-1)
- [ ] 월간/연간 구독료 계산
- [ ] Ledger Module (가계부) 연동

#### 2.3 통합 및 테스트
**예상 기간: 1주**

- [ ] Ledger ↔ Subscription 연동
  - 결제일에 자동으로 가계부 기록
- [ ] E2E 테스트
- [ ] 성능 테스트
- [ ] 사용자 테스트

### 마일스톤 2 완료 기준
- ✅ 가계부 모듈 완전 작동
- ✅ 구독 관리 모듈 완전 작동
- ✅ 두 모듈 연동
- ✅ 사용 가능한 MVP

---

## Phase 3: 마켓플레이스 & 웹사이트 (2개월)

### 목표
커뮤니티 생태계 구축

### 주요 작업

#### 3.1 Module Registry 구축
**예상 기간: 2주**

- [ ] GitHub 저장소 생성
- [ ] modules.json 스키마 정의
- [ ] 제출 프로세스 설계
- [ ] 자동 검증 (GitHub Actions)
- [ ] 보안 스캔 시스템

#### 3.2 공식 웹사이트 개발
**예상 기간: 4주**

**기술 스택:**
- Docusaurus(개발자 문서) / GitBook(사용자 문서)
- Cloudflare Pages

**페이지:**
- [ ] 홈페이지
- [ ] 마켓플레이스
  - [ ] 모듈 목록
  - [ ] 모듈 상세
  - [ ] 검색/필터
  - [ ] 통계 대시보드
- [ ] 문서
  - [ ] 사용자 가이드
  - [ ] 개발자 가이드 (API 문서 포함)
- [ ] 블로그
- [ ] 커뮤니티

#### 3.3 앱 내 Module Manager
**예상 기간: 3주**

**Backend:**
- [ ] 모듈 설치 API
- [ ] 모듈 제거 API
- [ ] 모듈 업데이트 API
- [ ] 통계 전송 API

**Frontend:**
- [ ] 설치된 모듈 관리
- [ ] 마켓플레이스 검색
- [ ] 원클릭 설치/제거
- [ ] 업데이트 확인
- [ ] 모듈 ON/OFF 토글

#### 3.4 통계 수집 시스템
**예상 기간: 1주**

- [ ] Cloudflare Workers + KV
- [ ] 다운로드 카운트
- [ ] 인기 모듈 랭킹
- [ ] 대시보드 차트

### 마일스톤 3 완료 기준
- ✅ 공식 웹사이트 오픈
- ✅ 마켓플레이스 작동
- ✅ 앱 내 모듈 관리 기능
- ✅ 통계 시스템 작동

---

## Phase 4: 배포 최적화 (1개월)

### 목표
쉬운 설치와 자동 업데이트

### 주요 작업

#### 4.1 웹 기반 설치 마법사
**예상 기간: 2주**

- [ ] 시작 화면
- [ ] 설정 입력 화면
  - [ ] 관리자 계정
  - [ ] 데이터베이스
  - [ ] AI 설정 (선택)
  - [ ] Google 연동 (선택)
  - [ ] 모듈 선택
- [ ] 설치 진행 화면
- [ ] 완료 화면
- [ ] WebSocket 실시간 진행 상황

#### 4.2 설정 관리 UI
**예상 기간: 1주**

- [ ] 일반 설정
- [ ] AI 설정
- [ ] 데이터베이스
- [ ] 통합 서비스
- [ ] 모듈 관리
- [ ] 시스템 설정

#### 4.3 자동 업데이트 시스템
**예상 기간: 2주**

- [ ] 업데이트 체커 (Scheduler)
- [ ] 시간대 지정
- [ ] 활성 사용자 확인
- [ ] 백업 자동 생성
- [ ] 유지보수 모드
- [ ] 롤백 기능
- [ ] 알림 시스템

#### 4.4 배포 템플릿
**예상 기간: 1주**

- [ ] Docker Compose 최적화
- [ ] Railway 템플릿
- [ ] Cloudflare 가이드
- [ ] 설치 문서 개선

### 마일스톤 4 완료 기준
- ✅ 5분 내 설치 가능
- ✅ 웹 UI로 모든 설정 가능
- ✅ 자동 업데이트 작동
- ✅ 다양한 플랫폼 지원

---

## Phase 5: 확장 및 생태계 (3개월)

### 목표
추가 모듈과 고급 기능

### 주요 작업

#### 5.1 Scheduler Plugin
**예상 기간: 2주**

- [ ] Cron 표현식 지원
- [ ] 작업 등록/관리
- [ ] 실행 로그
- [ ] 웹 UI 관리 페이지

#### 5.2 TODO Module
**예상 기간: 3주**

- [ ] 할 일 생성/관리
- [ ] 우선순위
- [ ] 마감일
- [ ] 카테고리/태그
- [ ] 완료 통계

#### 5.3 Project Module
**예상 기간: 4주**

- [ ] 프로젝트 생성/관리
- [ ] 외주 정보 기록
- [ ] 일정 관리
- [ ] 예산/정산
- [ ] 클라이언트 관리

#### 5.4 AI 요약 자동화
**예상 기간: 2주**

- [ ] 월간 가계부 요약
- [ ] 지출 패턴 분석
- [ ] 구독 최적화 제안
- [ ] 프로젝트 리포트

#### 5.5 통합 서비스 확장
**예상 기간: 2주**

- [ ] Notion 연동
- [ ] Slack 연동
- [ ] GitHub 연동
- [ ] 커스텀 Webhook

### 마일스톤 5 완료 기준
- ✅ 5개 이상 공식 모듈
- ✅ AI 자동화 작동
- ✅ 다양한 통합 서비스
- ✅ 완성도 높은 생태계

---

## Phase 6: 커뮤니티 성장 (지속적)

### 목표
커뮤니티 활성화 및 지속 가능성

### 주요 작업

#### 6.1 커뮤니티 구축
- [ ] Discord 서버 운영
- [ ] 월간 뉴스레터
- [ ] YouTube 튜토리얼
- [ ] 블로그 정기 업데이트

#### 6.2 이벤트 및 프로모션
- [ ] 해커톤 개최
- [ ] 모듈 개발 콘테스트
- [ ] 사용자 스토리 공유

#### 6.3 문서 및 교육
- [ ] 한국어 문서 완성
- [ ] 영어 번역
- [ ] 비디오 튜토리얼
- [ ] 모듈 개발 워크샵

#### 6.4 생태계 확장
- [ ] 커뮤니티 모듈 10개+
- [ ] 파트너십 (도구, 서비스)
- [ ] 기여자 100명+

---

## 릴리스 일정 (예상)

### v1.0.0 - MVP (Phase 1-2 완료)
**예상 날짜: 2026년 5월**

**포함 내용:**
- Core 레이어
- Ledger 모듈
- Subscription 모듈
- 기본 문서

**목표:**
- 혼자 사용 가능한 완전한 시스템
- Self-hosted 가능
- 안정적인 동작

### v1.5.0 - 마켓플레이스 (Phase 3 완료)
**예상 날짜: 2026년 7월**

**포함 내용:**
- 공식 웹사이트
- 마켓플레이스
- 앱 내 모듈 관리
- 통계 시스템

**목표:**
- 커뮤니티 생태계 시작
- 모듈 설치/제거 간편화

### v2.0.0 - 완전체 (Phase 4-5 완료)
**예상 날짜: 2026년 10월**

**포함 내용:**
- 웹 기반 설치 마법사
- 자동 업데이트
- TODO, Project 모듈
- AI 자동화
- 통합 서비스 확장

**목표:**
- 프로덕션 레디
- 비개발자도 쉽게 사용
- 완성도 높은 생태계

### v3.0.0 - 차세대 (Phase 6+)
**예상 날짜: 2027년 1분기**

**포함 내용:**
- 모바일 앱
- 고급 AI 기능
- 더 많은 통합 서비스
- 다국어 지원 확대

**목표:**
- 글로벌 커뮤니티
- 10,000+ 사용자
- 100+ 커뮤니티 모듈

---

## 우선순위

### P0 (최우선)
- Core 레이어 안정성
- 기본 인증/보안
- Ledger 모듈
- 문서

### P1 (높음)
- Subscription 모듈
- Module Loader
- 마켓플레이스
- 설치 마법사

### P2 (중간)
- TODO 모듈
- Project 모듈
- 자동 업데이트
- AI 자동화

### P3 (낮음)
- 모바일 앱
- 고급 AI 기능
- 추가 통합 서비스

---

## 리스크 및 대응

### 리스크 1: 개발 지연
**대응:**
- Phase 단위로 독립적 완성도
- MVP 먼저, 확장은 나중에
- 커뮤니티 기여 활성화

### 리스크 2: 커뮤니티 부족
**대응:**
- 초기부터 문서화 철저히
- 쉬운 기여 방법 제공
- 활발한 소통

### 리스크 3: 기술 부채
**대응:**
- 정기적인 리팩토링
- 코드 리뷰 철저히
- 테스트 커버리지 유지

### 리스크 4: 보안 이슈
**대응:**
- 정기적인 보안 감사
- 의존성 업데이트
- 커뮤니티 신고 시스템

---

## 성공 지표

### 기술적 지표
- [ ] 테스트 커버리지 > 70%
- [ ] 빌드 시간 < 2분
- [ ] 응답 시간 < 200ms
- [ ] 버그 해결 시간 < 7일

### 커뮤니티 지표
- [ ] GitHub Stars > 1,000
- [ ] 활성 기여자 > 50명
- [ ] 커뮤니티 모듈 > 20개
- [ ] Discord 멤버 > 500명

### 사용자 지표
- [ ] 월 활성 사용자 > 1,000명
- [ ] 설치 성공률 > 90%
- [ ] 사용자 만족도 > 4.5/5

---

## 장기 비전 (2-3년)

- 개인 금융 관리의 표준
- Self-hosted 생태계의 모범 사례
- 10,000+ 활성 사용자
- 100+ 커뮤니티 모듈
- 글로벌 커뮤니티

**하지만:**
- 여전히 완전 무료
- 여전히 Self-hosted 우선
- 여전히 커뮤니티 중심
