# Authentication Modes (Draft)

## 개요

Fieldstack는 현재 **이메일 + 비밀번호 기반 로컬 로그인**을 기본 인증 방식으로 사용한다.
이 문서는 과거 외부 OAuth(구글 로그인) 중심 초안을 정리하고,
현행 정책 기준에서 인증 모드 확장 방향을 다시 기록하기 위한 초안이다.

본 문서는 현재 구현 완료 상태를 의미하지 않으며,
향후 요구사항 변경 시 참고할 설계 기준을 보존하는 목적을 가진다.

---

## 기본 인증 정책

Fieldstack의 기본 공개 버전은 다음 인증 정책을 따른다.

- 이메일 + 비밀번호 로그인 기본/필수
- 비밀번호는 안전한 해시(예: Argon2id)로 저장
- Whitelist 기반 접근 제어 적용
- 필요 시 TOTP/Passkey/OAuth는 선택 기능으로 확장 가능

즉, 기본 모델은 "외부 계정 의존"이 아니라
"로컬 계정 기반 + 선택 확장"이다.

---

## 제한 환경에서의 사용 시나리오

다음과 같은 환경에서는 인증 정책이 더 엄격하게 요구될 수 있다.

- 관공서, 세무소, 공공기관
- 외부 인터넷 접근이 제한된 내부망
- 외부 계정 연동이 정책적으로 금지된 조직
- 감사 및 책임 주체가 명확히 요구되는 환경

이 경우 핵심은 OAuth 제거 자체가 아니라,
기본 로컬 인증에 추가 보안/운영 통제를 적용하는 방식이다.

---

## 운영 모드 분리 원칙

Fieldstack는 인증 요구 차이를
단일 설정 토글 하나로 단순화하지 않는다.

대신 다음 원칙을 따른다.

- 기본 모드: 로컬 계정(이메일/비밀번호) 중심 운영
- 제한 모드: 정책 요구에 맞춘 보안 통제(2FA 강제, 감사 강화, 계정 프로비저닝 제약) 추가
- 모드별 설정, 운영 가이드, 감사 기준을 명확히 분리

따라서 인증 변화는 단순 UI 옵션이 아니라
운영 정책 단위에서 관리한다.

---

## 인증 모드 추상화

향후 확장을 대비하여,
Fieldstack Core는 특정 로그인 공급자 구현에 직접 결합되지 않는다.

Core는 다음 공통 인터페이스를 전제로 한다.

- 사용자 인증 요청
- 인증 결과 검증
- 세션 또는 토큰 발급/검증
- 권한/역할 컨텍스트 전달

구체 구현은 로컬 인증, 선택 OAuth, Passkey 등
개별 어댑터에서 담당한다.

이 추상화의 목적은 다음과 같다.
- 기본 인증 정책의 안정성 유지
- 인증 수단 추가 시 기존 모듈 영향 최소화

---

## 별도 운영 모드 (예: Gov / Enterprise)

제한 환경을 위한 운영 모드는 다음 특성을 가질 수 있다.

- 로컬 계정 기반 인증만 허용 (선택 OAuth 비활성)
- 관리자 주도 계정 생성/비활성/복구 절차 적용
- TOTP 2FA 강제 정책 적용
- 감사 로그 및 접근 기록 강화
- 네트워크 격리 환경 전제

이 모드는 기본 공개 버전과
설정, 운영 절차, 컴플라이언스 기준에서 독립적으로 관리한다.

---

## 문서 상태

본 문서는 **초안(Draft)** 상태이다.

- 현재 구현 계획의 확정 사양이 아니다.
- 즉시 개발 항목을 의미하지 않는다.
- 향후 요청 또는 필요 발생 시 참고 자료로 활용된다.

설계 방향과 의사결정 근거를 보존하는 것이
유일한 목적이다.

---

## 요약

- Fieldstack의 기본 인증은 이메일 + 비밀번호 기반 로컬 로그인이다.
- OAuth(구글 로그인)는 기본이 아닌 선택 확장 옵션이다.
- 인증 정책 차이는 운영 모드 단위로 분리해 관리한다.
- 본 문서는 미래 확장을 대비한 설계 기록 초안이다.
