# Desktop Client Flow (Draft)

## 문서 목적

본 문서는 Fieldstack 프로젝트에서
향후 Electron 기반 데스크톱 클라이언트 제공을 고려할 경우를 대비한
**동작 흐름 및 연결 모델에 대한 초안 기록**이다.

이 문서는 현재 구현을 전제로 하지 않으며,
기획 및 설계 판단을 보존하기 위한 참고 자료로 유지된다.

---

## 기본 전제

- Fieldstack는 공식 플랫폼 서버를 제공하지 않는다.
- 사용자는 각자의 환경에서 Fieldstack 프레임워크 인스턴스를 운영한다.
- 데스크톱 클라이언트는 특정 서비스가 아닌,
  **개별 Fieldstack 인스턴스에 연결되는 클라이언트**로 동작한다.

---

## 데스크톱 클라이언트 역할 정의

Electron 기반 데스크톱 클라이언트는 다음 역할을 가진다.

- Fieldstack 인스턴스에 접근하기 위한 클라이언트
- 웹 UI를 대체하거나 보완하는 접근 수단
- 로컬 환경에 최적화된 사용자 경험 제공

데스크톱 클라이언트는:
- 서버를 포함하지 않으며
- 비즈니스 로직을 수행하지 않고
- Fieldstack Core를 대체하지 않는다.

---

## 동작 흐름 (정상 시나리오)

데스크톱 클라이언트의 기본 동작 흐름은 다음과 같다.

1. Electron 앱 다운로드 및 설치
2. Fieldstack 서버 연결
3. 사용자 로그인
4. 서버 기준 초기화(최적화)
5. 서비스 사용

---

### 1. Electron 앱 다운로드 및 설치

- 설치 직후의 앱은 비어 있는 상태로 시작한다.
- 서버 주소, 계정 정보, 기능 정보는 저장되어 있지 않다.

---

### 2. Fieldstack 서버 연결

- 최초 실행 시, 사용자는 연결할 Fieldstack 서버의 주소를 입력해야 한다.
- 서버 주소는 로컬 또는 원격 환경 모두 허용될 수 있다.
- 클라이언트는 서버 연결 가능 여부를 확인한다.

이 단계에서 데스크톱 클라이언트의 대상 인스턴스가 결정된다.

---

### 3. 로그인

- 로그인 방식은 연결된 Fieldstack 서버의 인증 정책을 따른다.
- 데스크톱 클라이언트는 인증 방식을 자체적으로 결정하지 않는다.

---

### 4. 서버 기준 초기화 (최적화)

- 클라이언트는 서버의 메타 정보를 조회한다.
- API 버전, 지원 기능, 서버 특성을 확인한다.
- 해당 서버에 맞도록 UI 및 기능 구성을 조정한다.

이 단계는 서버의 상태를 변경하지 않으며,
클라이언트 내부 설정 및 캐시 구성만을 수행한다.

---

### 5. 서비스 사용

- 초기화 완료 후, 클라이언트는 일반적인 사용 상태로 진입한다.
- 모든 기능 호출은 서버의 API를 통해 이루어진다.

---

## 초기화 및 재연결

- 데스크톱 클라이언트에서 전체 초기화를 수행할 경우,
  저장된 서버 정보는 제거된다.
- 초기화 이후에는 서버 연결 단계부터 다시 수행해야 한다.

이는 서버 단위 경계를 명확히 하기 위한 의도된 동작이다.

---

## 버전 및 호환성 고려 (개념 수준)

- 데스크톱 클라이언트와 Fieldstack 프레임워크는 동일한 버전을 요구하지 않는다.
- 호환성 판단은 API 버전 및 서버 제공 기능을 기준으로 이루어진다.
- 호환되지 않는 경우, 클라이언트는 연결을 거부하거나 제한된 동작을 수행할 수 있다.

구체적인 버전 정책은 향후 별도 문서로 정의될 수 있다.

---

## 문서 상태

- 본 문서는 **초안(Draft)** 상태이다.
- 구현 일정 및 제공 여부는 확정되지 않았다.
- 향후 기획 또는 외부 요청 발생 시 참고 자료로 활용한다.

---

## 요약

- 데스크톱 클라이언트는 Fieldstack 인스턴스에 연결된다.
- 서버 연결이 로그인보다 우선된다.
- 서버 기준 초기화를 통해 기능 및 UI가 구성된다.
- 초기화 시에는 서버 연결 단계부터 다시 수행한다.

