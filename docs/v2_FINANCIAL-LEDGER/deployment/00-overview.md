# Fieldstack 실행 및 배포 전략 정리

## 개요
Fieldstack는 **셀프호스트 가능한 SaaS형 플랫폼**을 목표로 한다.
홈서버, 클라우드, 서버(VPS/NAS) 등 **어디서 실행되든 동일한 사용자 경험(GUI 중심)**을 제공하며,
실행 환경 차이는 *배포/운영 방식*으로만 흡수한다.

본 문서는 Fieldstack의 **공식 실행 모델(배포 버전)**과 각 버전의 역할, 공통 원칙을 정리한다.

---

## 핵심 설계 원칙

1. **Core 단일화**
   - 모든 버전은 동일한 Fieldstack Core를 사용한다.
   - 기능 분기 없음, 코드베이스 1개 유지.

2. **GUI(Web) 우선 정책**
   - 모든 버전은 웹 GUI를 통한 설정 및 사용을 기본으로 한다.
   - 사용자는 CLI 없이도 모든 일반 기능을 사용할 수 있어야 한다.

3. **CLI는 예외적 도구**
   - CLI는 운영/복구/자동화를 위한 도구이며, 필수 사용 요소가 아니다.
   - OS 버전에서만 추가적으로 강화 제공한다.

4. **배포 방식 분리, 경험 통일**
   - Docker / Cloudflare / OS 환경은 다르지만,
   - 사용자 경험과 기능 접근 방식은 동일하게 유지한다.

---

## 실행 / 배포 버전 구성

Fieldstack는 **3가지 공식 실행 모델**을 제공합니다.

### 0. Native(CLI) 버전
**Docker 미사용 환경 모델**

- PM2와 같은 프로그램을 두고 24/7로 상시 구동할 수 있도록 제공
   - Docker 미설치 환경 → PM2 상시 구동 가능
- systemd로도 24/7 상시 구동 가능 (단일 프로세스 기준)
- 단, OS Native 버전 사용을 권장

---

### 1. Docker 버전
**Fieldstack의 표준 실행 모델**

- Docker / Docker Compose 기반
- 홈서버, NAS, VPS, 개발 환경 공용

**특징**
- 표준 포트 구성 (3000)
- All-in-one 이미지
- 모든 문서의 기준점

---

### 2. Cloudflare 버전
**외부 접속 프리셋**

- Docker 기반 + Cloudflare 설정
- Tunnel / HTTPS 자동화
- 네트워크 지식 불필요

**특징**
- 포트포워딩 불필요
- IP 노출 없음
- 무료 SSL/TLS

---

### 3. OS Native 버전
**서버 운영자용**

- Ubuntu / Debian 커널 기반
- systemd 서비스
- Docker 없이 실행

**특징**
- 네이티브 성능
- 서버 소프트웨어 수준 통합
- 강화된 CLI 제공

**제공 방식 예시**
- TrueNAS
- Proxmox

---

## 관리 구조

| 구분 | Native/CLI | Docker | Cloudflare | OS Native |
|------|-----------|--------|------------|-----------|
| Core | ✅ 공통 | ✅ 공통 | ✅ 공통 | ✅ 공통 |
| GUI | ✅ 웹 | ✅ 웹 | ✅ 웹 | ✅ 웹 |
| Runtime | PM2 | Docker | Docker + Tunnel | systemd |
| CLI | 기본 | 기본 | 기본 | 강화 |
| 권장도 | ⚠️ 임시 | ⭐⭐⭐ | ⭐⭐ | ⭐ |

---

## 사실상 관리되는 4가지 축

| 구분 | 설명 |
|--------|---------|
| Core | Fieldstack 핵심 로직 (공통) |
| Web GUI | 설정/사용 인터페이스 (공통, 기본) |
| Runtime | Docker / PM2 / systemd |
| Control | CLI 제공 여부 및 역할 |

> 참고: systemd는 단일 프로세스 상시 구동에 적합하며,
> 멀티코어 활용이 필요하면 PM2(클러스터)나 Node.js 클러스터 방식 고려.

---

## GUI(Web) 정책

모든 버전 공통:
- 초기 설정
- 서비스 설정
- 사용자 관리
- 데이터 관리
- 외부 접속 설정

👉 **전부 웹 GUI에서 처리 가능해야 한다.**

웹 GUI는 Fieldstack의 **주 인터페이스**이며,
CLI는 이를 대체하지 않는다.

---

## CLI 정책 (OS 버전 중심)

### CLI 제공 목적
- 웹 GUI 장애 시 복구
- 초기 설치/재설정
- 상태 점검
- 백업/복구
- Mode 1 계정 복구 (Local CLI reset)
- 무인 환경 자동화

### CLI 역할 제한
- 일반 사용자 기능 제공 ❌
- 일상적 설정 변경 ❌
- 웹 GUI 대체 ❌

### CLI 성격 정의
> CLI는 **운영자의 안전장치**이며,
> 웹 GUI는 **사용자의 기본 인터페이스**다.

---

## 권장 개발 우선순위

1. **Docker (일반 + 비도커 포함)**
   - Core 개발 기준
   - 문서 및 테스트 기준

2. **Cloudflare 버전**
   - Docker 기반 확장
   - 외부 접속 프리셋 제공

3. **OS 버전 (Linux)**
   - Docker 구조를 네이티브로 이식
   - systemd + CLI 추가

---

## 한 문장 정의

> **Fieldstack는 Docker, Cloudflare, Linux 환경 어디서든 실행 가능한
> 셀프호스트 SaaS형 플랫폼이며,
> 모든 설정과 사용은 웹 GUI를 기본으로 한다.**

---

## 비고
- 기능 분기는 존재하지 않는다.
- 차이는 오직 **배포 방식과 운영 도구**에만 존재한다.
- 사용자는 환경을 선택할 뿐, 제품을 다시 배울 필요가 없다.
